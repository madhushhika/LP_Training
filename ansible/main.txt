---
- name: setup application server
  hosts: web
  remote_user: ec2-user
  become: true

  tasks:
  - name: install basic tools
    yum: name{{item}} state=present
    with_items:
     - nmap
     - git
     - epel-release

  - name: install java - push packagee to remote node
    copy:
     src: jdk-8u202-linux-x64.rpm
     dest: /opt/jdk-8u202-linux-x64.rpm
     owner: ec2-user
     group: ec2-user
     mode: '0744'

  - name: install java from copied rpm
    yum: name=/opt/jdk-8u202-linux-x64.rpm state=present

  - name: install docker
    yum: name=docker state=present

  - name: start docker
    service: name=docker state=started
                                                                                                                                                                                                  - name: install maven                                                                                                                                                                             get_url: url=https://downloads.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz dest=/opt/apache-maven-3.6.3-bin.tar.gz
                                                                                                                                                                                                  - name: untar maven package                                                                                                                                                                       shell: chdir=/opt creates=/opt/apache-maven-3.6.3 tar -zxf apache-maven-3.6.3-bin.tar.gz -C /opt
                                                                                                                                                                                                  - name: update path                                                                                                                                                                               shell: echo "PATH=$PATH:/opt/apache-maven-3.6.3/bin" > /etc/environment
~                                                                                   